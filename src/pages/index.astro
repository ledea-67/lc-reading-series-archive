---
/**
 * Homepage — The Archive
 *
 * An invitation into the archive. Dramatic typography, curated glimpse of writers,
 * clear paths inward. The title commands attention; the collection beckons.
 */
import Base from '../layouts/Base.astro';
import WriterCard from '../components/WriterCard.astro';
import { writers, metadata, getAllYears, getWritersByYear } from '../lib/data';

const years = getAllYears();
const startYear = years[years.length - 1];
const endYear = years[0];

// Featured writers: prioritize those with awards and known years
const featuredWriters = writers
  .filter(w => !w.years.includes(0) && w.awards.length > 0)
  .slice(0, 6);

// Recent years for quick navigation
const recentYears = years.slice(0, 5).map(year => ({
  year,
  count: getWritersByYear(year).length
}));
---

<Base title="The Archive">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-container">
      <p class="hero-intro">The</p>
      <h1 class="hero-title">Lewis & Clark<br />Reading Series</h1>
      <p class="hero-subtitle">Archive</p>

      <div class="hero-meta">
        <p class="hero-span">{startYear} — {endYear}</p>
        <p class="hero-count">{metadata.totalWriters} literary voices</p>
      </div>

      <p class="hero-description">
        A preserved collection of poets, novelists, and essayists who have graced the series.
        Each name a chapter in two decades of literary gatherings.
      </p>
    </div>
  </section>

  <!-- Decorative divider -->
  <div class="section-ornament">
    <span class="ornament-line"></span>
    <span class="ornament-symbol">§</span>
    <span class="ornament-line"></span>
  </div>

  <!-- Featured Writers -->
  <section class="featured">
    <div class="section-container">
      <header class="section-header">
        <h2 class="section-title">Featured Voices</h2>
        <p class="section-subtitle">From the collection</p>
      </header>

      <div class="featured-grid">
        {featuredWriters.map((writer, i) => (
          <WriterCard
            writer={writer}
            size="medium"
            showYears={true}
            delay={100 + i * 80}
          />
        ))}
      </div>

      <footer class="section-footer">
        <a href="/writers" class="section-link">
          <span>View all {metadata.totalWriters} writers</span>
          <span class="link-arrow">&rarr;</span>
        </a>
      </footer>
    </div>
  </section>

  <!-- Timeline Preview -->
  <section class="timeline-preview">
    <div class="section-container">
      <header class="section-header">
        <h2 class="section-title">Browse by Year</h2>
        <p class="section-subtitle">The chronological spine</p>
      </header>

      <div class="years-grid">
        {recentYears.map((item, i) => (
          <a
            href={`/years/${item.year}`}
            class="year-card"
            style={`animation-delay: ${150 + i * 60}ms`}
          >
            <span class="year-card-year">{item.year}</span>
            <span class="year-card-count">{item.count} {item.count === 1 ? 'writer' : 'writers'}</span>
          </a>
        ))}
      </div>

      <footer class="section-footer">
        <a href="/years" class="section-link">
          <span>Explore the complete timeline</span>
          <span class="link-arrow">&rarr;</span>
        </a>
      </footer>
    </div>
  </section>

  <!-- About teaser -->
  <section class="about-teaser">
    <div class="about-container">
      <blockquote class="about-quote">
        <p>This digital archive preserves the legacy of the Reading Series, making information about visiting writers accessible to students, scholars, and the broader literary community.</p>
      </blockquote>
      <a href="/about" class="about-link">About the archive &rarr;</a>
    </div>
  </section>
</Base>

<style>
  /* Hero Section */
  .hero {
    padding: var(--space-16) 0 var(--space-12);
    text-align: center;
  }

  .hero-container {
    max-width: var(--width-prose);
    margin: 0 auto;
    padding: 0 var(--margin-page);
  }

  .hero-intro {
    font-family: var(--font-ui);
    font-size: var(--text-lg);
    font-style: italic;
    color: var(--ink-muted);
    letter-spacing: var(--tracking-wide);
    margin-bottom: var(--space-2);
    animation: settle var(--duration-slower) var(--ease-out) forwards;
    animation-delay: 50ms;
    opacity: 0;
    transform: translateY(8px);
  }

  .hero-title {
    font-family: var(--font-display);
    font-size: var(--text-hero);
    font-weight: 400;
    letter-spacing: var(--tracking-tight);
    line-height: 0.95;
    color: var(--ink-deep);
    margin: 0 0 var(--space-3);
    animation: settle var(--duration-slower) var(--ease-out) forwards;
    animation-delay: 100ms;
    opacity: 0;
    transform: translateY(8px);
  }

  .hero-subtitle {
    font-family: var(--font-display);
    font-size: var(--text-3xl);
    font-weight: 300;
    font-style: italic;
    color: var(--ink-soft);
    letter-spacing: var(--tracking-wide);
    margin-bottom: var(--space-8);
    animation: settle var(--duration-slower) var(--ease-out) forwards;
    animation-delay: 150ms;
    opacity: 0;
    transform: translateY(8px);
  }

  .hero-meta {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-8);
    animation: settle var(--duration-slower) var(--ease-out) forwards;
    animation-delay: 200ms;
    opacity: 0;
    transform: translateY(8px);
  }

  .hero-span {
    font-family: var(--font-display);
    font-size: var(--text-xl);
    font-variant-numeric: oldstyle-nums;
    color: var(--ink-body);
    margin: 0;
  }

  .hero-count {
    font-family: var(--font-ui);
    font-size: var(--text-sm);
    font-style: italic;
    color: var(--ink-muted);
    letter-spacing: var(--tracking-wide);
    margin: 0;
  }

  .hero-description {
    font-family: var(--font-body);
    font-size: var(--text-lg);
    line-height: var(--leading-relaxed);
    color: var(--ink-soft);
    max-width: 32rem;
    margin: 0 auto;
    animation: settle var(--duration-slower) var(--ease-out) forwards;
    animation-delay: 250ms;
    opacity: 0;
    transform: translateY(8px);
  }

  /* Ornament Divider */
  .section-ornament {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-4);
    margin: var(--space-8) auto;
    max-width: 200px;
  }

  .ornament-line {
    flex: 1;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent,
      var(--rule-light)
    );
  }

  .ornament-line:last-child {
    background: linear-gradient(
      to left,
      transparent,
      var(--rule-light)
    );
  }

  .ornament-symbol {
    font-family: var(--font-display);
    font-size: var(--text-lg);
    color: var(--ink-muted);
  }

  /* Section Containers */
  .section-container {
    max-width: var(--width-wide);
    margin: 0 auto;
    padding: var(--space-10) var(--margin-page);
  }

  .section-header {
    text-align: center;
    margin-bottom: var(--space-10);
  }

  .section-title {
    font-family: var(--font-display);
    font-size: var(--text-3xl);
    font-weight: 400;
    color: var(--ink-deep);
    margin: 0 0 var(--space-2);
  }

  .section-subtitle {
    font-family: var(--font-ui);
    font-size: var(--text-sm);
    font-style: italic;
    color: var(--ink-muted);
    letter-spacing: var(--tracking-wide);
    margin: 0;
  }

  .section-footer {
    text-align: center;
    margin-top: var(--space-10);
  }

  .section-link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-family: var(--font-ui);
    font-size: var(--text-base);
    color: var(--ink-soft);
    text-decoration: none;
    transition: var(--transition-color);
  }

  .section-link:hover {
    color: var(--accent-stamp);
  }

  .link-arrow {
    transition: transform var(--duration-fast) var(--ease-out);
  }

  .section-link:hover .link-arrow {
    transform: translateX(4px);
  }

  /* Featured Grid */
  .featured-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: var(--space-8);
  }

  /* Years Grid */
  .years-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--space-5);
  }

  .year-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-5) var(--space-6);
    text-decoration: none;
    color: inherit;
    border: 1px solid var(--rule-faint);
    border-radius: 2px;
    background: var(--paper-cotton);
    transition:
      border-color var(--duration-normal) var(--ease-out),
      box-shadow var(--duration-normal) var(--ease-out);
    animation: settle var(--duration-slower) var(--ease-out) forwards;
    opacity: 0;
    transform: translateY(8px);
  }

  .year-card:hover {
    border-color: var(--rule-light);
    box-shadow: 0 2px 8px rgba(26, 22, 18, 0.06);
  }

  .year-card:hover .year-card-year {
    color: var(--accent-stamp);
  }

  .year-card-year {
    font-family: var(--font-display);
    font-size: var(--text-2xl);
    font-weight: 400;
    font-variant-numeric: oldstyle-nums;
    color: var(--ink-deep);
    line-height: 1;
    transition: var(--transition-color);
  }

  .year-card-count {
    font-family: var(--font-ui);
    font-size: var(--text-xs);
    font-style: italic;
    color: var(--ink-muted);
    letter-spacing: var(--tracking-wide);
  }

  /* About Teaser */
  .about-teaser {
    background: var(--paper-aged);
    padding: var(--space-12) 0;
    margin-top: var(--space-10);
    border-top: 1px solid var(--rule-faint);
  }

  .about-container {
    max-width: var(--width-prose);
    margin: 0 auto;
    padding: 0 var(--margin-page);
    text-align: center;
  }

  .about-quote {
    margin: 0 0 var(--space-6);
    padding: 0;
  }

  .about-quote p {
    font-family: var(--font-body);
    font-size: var(--text-lg);
    font-style: italic;
    line-height: var(--leading-relaxed);
    color: var(--ink-soft);
    margin: 0;
  }

  .about-link {
    font-family: var(--font-ui);
    font-size: var(--text-sm);
    color: var(--ink-muted);
    text-decoration: none;
    letter-spacing: var(--tracking-wide);
    transition: var(--transition-color);
  }

  .about-link:hover {
    color: var(--accent-stamp);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .hero {
      padding: var(--space-12) 0 var(--space-10);
    }

    .hero-title {
      font-size: var(--text-5xl);
    }

    .hero-subtitle {
      font-size: var(--text-2xl);
    }

    .featured-grid {
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: var(--space-6);
    }

    .section-title {
      font-size: var(--text-2xl);
    }
  }

  @media (max-width: 480px) {
    .hero {
      padding: var(--space-10) 0 var(--space-8);
    }

    .hero-container {
      padding: 0 var(--margin-page-narrow);
    }

    .hero-title {
      font-size: var(--text-4xl);
    }

    .hero-subtitle {
      font-size: var(--text-xl);
    }

    .section-container {
      padding: var(--space-8) var(--margin-page-narrow);
    }

    .featured-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-5);
    }

    .years-grid {
      gap: var(--space-3);
    }

    .year-card {
      padding: var(--space-4) var(--space-5);
    }
  }
</style>
